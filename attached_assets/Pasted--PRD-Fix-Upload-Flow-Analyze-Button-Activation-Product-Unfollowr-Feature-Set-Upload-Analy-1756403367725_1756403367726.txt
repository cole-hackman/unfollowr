üìÑ PRD ‚Äì Fix Upload Flow & Analyze Button Activation

Product: Unfollowr
Feature Set: Upload & Analyze Flow
Owner: [You]
Engineering: [Senior SWE]
Date: [Today‚Äôs Date]

‚∏ª

1. Objective

Users report that after uploading their Instagram export files, the ‚ÄúAnalyze non-followers‚Äù button remains disabled. The upload ‚Üí validate ‚Üí enable workflow needs to be fixed so the analyze flow is smooth and reliable.

‚∏ª

2. Scope

In Scope
	‚Ä¢	Fix logic that enables the Analyze button after valid files are uploaded.
	‚Ä¢	Validate file types (JSON or HTML only).
	‚Ä¢	Ensure both required files (Followers + Following) are present before enabling.
	‚Ä¢	Show inline error if wrong/missing file.
	‚Ä¢	Update UI state transitions (disabled ‚Üí enabled) smoothly.

Out of Scope
	‚Ä¢	AI analysis backend logic (assume existing analysis function works once called).
	‚Ä¢	Styling of the upload card (only behavior/state updates are in scope).

‚∏ª

3. Current Behavior
	‚Ä¢	User drags/drops or selects files.
	‚Ä¢	Files appear in upload UI.
	‚Ä¢	Issue: Analyze button remains disabled regardless of valid files being present.

‚∏ª

4. Expected Behavior
	‚Ä¢	Before Upload:
	‚Ä¢	Analyze button disabled.
	‚Ä¢	Tooltip or gray state explains: ‚ÄúUpload your Followers + Following files to begin.‚Äù
	‚Ä¢	On Upload:
	‚Ä¢	Validate file type: must be .json or .html.
	‚Ä¢	Identify file as Followers or Following (via filename check or content keys).
	‚Ä¢	If valid + both files uploaded ‚Üí enable Analyze non-followers button.
	‚Ä¢	On Invalid File:
	‚Ä¢	Show inline error (e.g., ‚ÄúUnsupported file type, please upload JSON/HTML.‚Äù).
	‚Ä¢	Keep button disabled.
	‚Ä¢	On Clear All:
	‚Ä¢	Remove uploaded files.
	‚Ä¢	Reset state ‚Üí button disabled.

‚∏ª

5. Technical Requirements
	‚Ä¢	Frontend stack: Next.js + React + Tailwind.
	‚Ä¢	Use client-side validation:
	‚Ä¢	Check MIME type (application/json, text/html).
	‚Ä¢	Parse JSON for expected keys: relationships_followers and relationships_following.
	‚Ä¢	Button state logic:
	‚Ä¢	disabled = !(followersFile && followingFile && filesValid).
	‚Ä¢	Accessibility:
	‚Ä¢	Ensure disabled button has aria-disabled.
	‚Ä¢	Error messages should be screen-reader accessible.

‚∏ª

6. Deliverables
	‚Ä¢	Fixed upload card with:
	‚Ä¢	Proper validation.
	‚Ä¢	Clear error messages.
	‚Ä¢	Smooth enable/disable state for Analyze button.
	‚Ä¢	Unit tests for upload flow logic.
	‚Ä¢	Manual QA: upload combinations (valid, invalid, missing) and confirm correct state changes.

‚∏ª

7. Acceptance Criteria
	‚Ä¢	‚úÖ Upload both valid files ‚Üí Analyze button enabled.
	‚Ä¢	‚úÖ Upload only one file ‚Üí button stays disabled.
	‚Ä¢	‚úÖ Upload wrong file type ‚Üí error shown, button disabled.
	‚Ä¢	‚úÖ Clear All resets state ‚Üí button disabled again.
	‚Ä¢	‚úÖ Tooltip or helper text always clarifies why button is disabled.
	‚Ä¢	‚úÖ Works consistently for drag-and-drop and file picker.
	‚Ä¢	‚úÖ Mobile and desktop tested.