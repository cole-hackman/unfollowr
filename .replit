modules = ["python-3.11"]

[nix]
channel = "stable-24_05"
packages = ["openssl", "postgresql", "nodejs-20_x"]

[deployment]
deploymentTarget = "autoscale"
# Build and run the Next.js app from the next/ directory
run = ["bash", "-lc", "cd next && npm ci --yes && npm run build && npm start"]

[workflows]
runButton = "Next dev"

[[workflows.workflow]]
name = "Next dev"
mode = "parallel"
author = "agent"

[[workflows.workflow.tasks]]
task = "workflow.run"
args = "Start Next"

[[workflows.workflow]]
name = "Start Next"
author = "agent"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd next && npm ci --yes && npm run dev -- -p $PORT"
waitForPort = 3001

[[ports]]
localPort = 3001
externalPort = 80

[agent]
integrations = ["python_gemini==1.0.0", "web_scraper==1.0.0", "styling_replit==1.0.0"]
